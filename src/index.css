@import url('https://fonts.googleapis.com/css2?family=Instrument+Serif:ital@0;1&family=JetBrains+Mono:wght@400;500&display=swap');

@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    --background: 240 6% 10%;
    --foreground: 40 15% 92%;

    --card: 240 5% 12%;
    --card-foreground: 40 15% 92%;

    --popover: 240 5% 14%;
    --popover-foreground: 40 15% 92%;

    --primary: 38 92% 70%;
    --primary-foreground: 240 6% 10%;

    --secondary: 240 4% 18%;
    --secondary-foreground: 40 10% 75%;

    --accent: 38 75% 55%;
    --accent-foreground: 240 6% 10%;

    --destructive: 0 62% 55%;
    --destructive-foreground: 40 15% 92%;

    --border: 240 4% 20%;
    --input: 240 4% 20%;
    --ring: 38 92% 70%;

    --radius: 0.75rem;

    /* Custom tokens */
    --glow-primary: 38 92% 70%;
    --surface-elevated: 240 5% 14%;
    --text-dim: 40 6% 45%;

    /* Typography */
    --font-display: 'Instrument Serif', Georgia, serif;
    --font-mono: 'JetBrains Mono', 'Fira Code', monospace;
    --font-body: 'JetBrains Mono', monospace;
  }

  @keyframes shimmer {
    0% {
      background-position: -200% 0;
    }

    100% {
      background-position: 200% 0;
    }
  }

  @keyframes floating-1 {

    0%,
    100% {
      transform: translateY(0);
    }

    50% {
      transform: translateY(-15px);
    }
  }

  @keyframes floating-2 {

    0%,
    100% {
      transform: translateY(0);
    }

    50% {
      transform: translateY(-25px);
    }
  }

  @keyframes floating-3 {

    0%,
    100% {
      transform: translateY(0);
    }

    50% {
      transform: translateY(-10px);
    }
  }

  @keyframes pop-in {
    0% {
      opacity: 0;
      transform: scale(0.5);
    }

    50% {
      transform: scale(1.1);
    }

    100% {
      opacity: 1;
      transform: scale(1);
    }
  }

  @keyframes heart-pulse {

    0%,
    100% {
      transform: scale(1);
    }

    50% {
      transform: scale(1.2);
    }
  }

  .light-mode {
    --background: 40 25% 97%;
    --foreground: 240 10% 12%;

    --card: 0 0% 100%;
    --card-foreground: 240 10% 12%;

    --popover: 0 0% 100%;
    --popover-foreground: 240 10% 12%;

    --primary: 240 6% 15%;
    --primary-foreground: 40 25% 97%;

    --secondary: 40 15% 92%;
    --secondary-foreground: 240 10% 25%;

    --accent: 25 90% 55%;
    --accent-foreground: 0 0% 100%;

    --border: 40 10% 85%;
    --input: 40 10% 85%;
    --ring: 240 6% 15%;

    --surface-elevated: 0 0% 100%;
    --text-dim: 240 6% 50%;
  }

  .midnight-mode {
    --background: 222 47% 6%;
    --foreground: 210 40% 98%;

    --card: 222 47% 10%;
    --card-foreground: 210 40% 98%;

    --popover: 222 47% 12%;
    --popover-foreground: 210 40% 98%;

    --primary: 199 89% 48%;
    --primary-foreground: 222 47% 6%;

    --secondary: 222 40% 15%;
    --secondary-foreground: 210 40% 80%;

    --accent: 262 83% 58%;
    --accent-foreground: 210 40% 98%;

    --border: 222 40% 18%;
    --input: 222 40% 18%;
    --ring: 199 89% 48%;

    --surface-elevated: 222 47% 14%;
    --text-dim: 215 20% 50%;
  }
}

@layer base {
  * {
    @apply border-border;
  }

  body {
    @apply bg-background text-foreground antialiased;
    font-family: var(--font-body);
    /* 1. Background Enhancement - Theme Aware */
    background: radial-gradient(circle at top center, hsl(var(--background) / 0.8), hsl(var(--background))),
      linear-gradient(to bottom, hsl(var(--background)), #050505);
    min-height: 100vh;
  }

  h1,
  h2,
  h3,
  h4 {
    font-family: var(--font-display);
    /* 5. Typography Enhancement */
    color: hsl(var(--foreground));
  }

  h1 {
    letter-spacing: -0.02em;
  }

  code,
  pre {
    font-family: var(--font-mono);
  }
}

@layer components {
  /* 2. Palette Cards Enhancement */
  /* Targeting the card buttons specifically. 
     Using :where() to lower specificity if needed, but here simple class selection is fine.
     We rely on the classes used in PaletteCard.tsx: `group relative w-full overflow-hidden rounded-lg border bg-card p-4...` 
  */

  /* Select buttons that are palette cards. They have bg-card and border classes. */
  .palette-card-btn {
    position: relative;
    /* Glassmorphism */
    background-color: hsl(var(--card) / 0.45);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);

    /* Modern rounded corners are already applied (rounded-lg), keeping them. */

    /* Smooth transition */
    transition: all 0.4s cubic-bezier(0.2, 0.8, 0.2, 1);
    border-color: hsl(var(--border) / 0.6);
  }

  .palette-card-btn:hover {
    /* Hover Animation */
    transform: scale(1.02);
    /* Soft glow using accent */
    box-shadow: 0 0 30px -5px hsl(var(--accent) / 0.15);
    border-color: hsl(var(--accent) / 0.3);
    background-color: hsl(var(--card) / 0.6);
    z-index: 10;
  }

  /* 3. Selected Palette (Active Card) */
  /* The active card has .border-primary and .glow-accent applied in JS. 
     We can target it via these classes.
  */
  .palette-card-btn.border-primary {
    /* Soft red glow border override/enhancement */
    border-color: hsl(var(--primary) / 0.8);
    box-shadow: 0 0 40px -5px hsl(var(--primary) / 0.25),
      0 0 15px -2px hsl(var(--primary) / 0.1);

    /* Slightly brighter background */
    background-color: hsl(var(--card) / 0.8);

    /* Ensure it doesn't scale on selection unless hovered, but usually selected is static? 
       If we want it 'elegant', maybe no huge scale, just the glow. 
       Let's keep the scale if hovered, but base state is just glowing.
    */
  }

  /* 4. Color Swatches Enhancement */
  /* In PaletteDetail.tsx, swatches are buttons inside the grid.
     They don't have a specific class name but are 'group relative flex flex-1...'.
     We can stick to a broad rule or add a specific check? 
     Let's try a safer approach: Targeting buttons inside the swatch container usually works, 
     but since we can't change HTML structure, we look for buttons that have inline styles for background color or similar characteristics.
     Actually, ColorSwatch.tsx uses `animate-scale-in`. We can use that!
  */
  .swatch-btn {
    transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
    cursor: pointer;
  }

  .swatch-btn:hover {
    /* Slight lift */
    transform: translateY(-4px) scale(1.02);
    /* Subtle shadow */
    box-shadow: 0 10px 20px -5px rgba(0, 0, 0, 0.3);
    z-index: 20;
  }
}

@layer utilities {
  .font-display {
    font-family: var(--font-display);
  }

  .font-mono {
    font-family: var(--font-mono);
  }

  /* Staggered animation delays */
  .stagger-1 {
    animation-delay: 0.05s;
  }

  .stagger-2 {
    animation-delay: 0.1s;
  }

  .stagger-3 {
    animation-delay: 0.15s;
  }

  .stagger-4 {
    animation-delay: 0.2s;
  }

  .stagger-5 {
    animation-delay: 0.25s;
  }

  .stagger-6 {
    animation-delay: 0.3s;
  }

  .stagger-7 {
    animation-delay: 0.35s;
  }

  .stagger-8 {
    animation-delay: 0.4s;
  }

  /* Glow effect - Updating to be more subtle/refined if needed, 
     but the component implementation overrides this mostly. 
     We can leave it as a utility helper. 
  */
  .glow-accent {
    box-shadow: 0 0 40px -10px hsl(var(--primary) / 0.4);
  }

  /* Subtle grain texture overlay */
  .grain::before {
    content: '';
    position: absolute;
    inset: 0;
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
    opacity: 0.04;
    mix-blend-mode: overlay;
    pointer-events: none;
    z-index: 1;
  }
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background: hsl(var(--background));
}

::-webkit-scrollbar-thumb {
  background: hsl(var(--border) / 0.5);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: hsl(var(--secondary-foreground) / 0.5);
}